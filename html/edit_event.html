<script>
function checklength(obj,warning_div){
    var mlength=obj.getAttribute? parseInt(obj.getAttribute("maxlength")) : ""
    if (obj.getAttribute && obj.value.length>mlength){
        obj.blur();
        obj.value=obj.value.substring(0,mlength);
        document.getElementById(warning_div).innerHTML = "<span style='color:red;font-weight:bold;'>max. "+mlength+"</span>";
    }
    else {
        warning_div.innerHTML = "";
    }
    document.getElementById('counter').innerHTML =  obj.value.length;
}
</script>


<h2><center><?php echo $grid_name?>&nbsp;:&nbsp;<?php echo $modlos_make_ttl?></center></h2>
<br />

<form METHOD="POST" ACTION=<?php echo $action_url?> >
  <{xoops_token form=$actionForm?>
  <input type="hidden" name="event_id" value="<?php echo $event_id?>" />

  <table cellSpacing=0 cellPadding=0 width=600 border=0 align=center>
    <tbody>
      <tr>
        <td valign=top align=center>&nbsp;</td>
        <td valign=top align=center width=600>

          <table width="600" border="0" align="center" cellpadding="1" cellspacing="1" bgcolor="#FFFFFF">

            <tr align="left">
              <td class="head" width=200><?php echo $modlos_name?></td>
              <td class="odd"  width=400><input type="text" id="event_name" name="event_name" size="35" value="<?php echo $event_name?>" /></td>
            </tr>

            <tr align="left">
              <td class="head" valign="top"><?php echo $modlos_desc?></td>
              <td class="even">
                <textarea name="event_desc" rows="7" cols="" style="width:90%" wrap="virtual" maxlength="1024" onfocus="return checklength(this,'contact_max_warning')" onkeyup="return checklength(this,'contact_max_warning')" ><?php echo $event_desc?></textarea><br />
                <div>
                <div>
                  <em id="contact_max_warning"><?php echo $modlos_max?> <strong>1024</strong> </em> 
                  <?php echo $modlos_char?>&nbsp;&nbsp;<?php echo $modlos_inputed?>: <em id="counter"></em>
                </div>
              </td>
            </tr>

            <tr align="left">
              <td class="head" valign="top"><?php echo $modlos_owner?></td>
              <td class="even">
                <select name="owner_name">
	      		  <{foreach from=$owners item="owner"?>
                    <?php if ($owner.fullname==$event_owner) {?>
                      <option value="<?php echo $owner.UUID?>|<?php echo $owner.fullname?>" selected ><?php echo $owner.fullname?></option>
                    <?php } else {?>
                      <option value="<?php echo $owner.UUID?>|<?php echo $owner.fullname?>" ><?php echo $owner.fullname?></option>
                    <?php }?>
	      		  <{/foreach?>
                </select>
              </td>
            </tr>

            <{include file="$date_file"?>

            <tr align="left">
              <td class="head"><?php echo $modlos_category?></td>
              <td class="even">
                <select name="category">
                  <option value="0"  <?php if ($category==0) {?>selected<?php }?> ><?php echo $modlos_all_category?></option>
                  <option value="18" <?php if ($category==18){?>selected<?php }?> ><?php echo $modlos_discussion?></option>
                  <option value="19" <?php if ($category==19){?>selected<?php }?> ><?php echo $modlos_sports?></option>
                  <option value="20" <?php if ($category==20){?>selected<?php }?> ><?php echo $modlos_music?></option>
                  <option value="22" <?php if ($category==22){?>selected<?php }?> ><?php echo $modlos_commercial?></option>
                  <option value="23" <?php if ($category==23){?>selected<?php }?> >
                    <?php if (!$pg_only) {echo $modlos_nightlife;}?><?php echo $modlos_enteme?>
                  </option>
                  <option value="24" <?php if ($category==24){?>selected<?php }?> ><?php echo $modlos_games?></option>
                  <option value="25" <?php if ($category==25){?>selected<?php }?> ><?php echo $modlos_pageants?></option>
                  <option value="26" <?php if ($category==26){?>selected<?php }?> ><?php echo $modlos_edu?></option>
                  <option value="27" <?php if ($category==27){?>selected<?php }?> ><?php echo $modlos_arts?></option>
                  <option value="28" <?php if ($category==28){?>selected<?php }?> ><?php echo $modlos_charity?></option>
                  <option value="29" <?php if ($category==29){?>selected<?php }?> ><?php echo $modlos_misc?></option>
                </select>
              </td>
            </tr>

            <tr align="left">
              <td nowrap class="head"><?php echo $modlos_charge?></td>
              <td class="odd">
                <select name="cover_charge">
                  <option value="0" <?php if ($cover_charge==0){?>selected<?php }?> ><?php echo $modlos_no?></option>
                  <option value="1" <?php if ($cover_charge==1){?>selected<?php }?> ><?php echo $modlos_yes?></option>
                </select>&nbsp;&nbsp;
                <?php echo $modlos_amount?> (L$):&nbsp;<input type="text" name="cover_amount" size="3" maxlength="5" value="<?php echo $cover_amount?>" />
              </td>
            </tr>

            <tr align="left">
              <td class="head"><?php echo $modlos_location?></td>
              <td class="even">
                <select name="parcel_name">
                  <option value="0/0/0|00000000-0000-0000-0000-00000000000"><?php echo $modlos_pick_parcel?></option>
	      		  <{foreach from=$parcels item="parcel"?>
                    <?php if ($global_pos==$parcel.landingpoint and $region_uuid==$parcel.regionUUID) {?>
                      <option value="<?php echo $parcel.landingpoint?>|<?php echo $parcel.regionUUID?>" selected><?php echo $parcel.name?></option>
                    <?php } else {?>
                      <option value="<?php echo $parcel.landingpoint?>|<?php echo $parcel.regionUUID?>" ><?php echo $parcel.name?></option>
                    <?php }?>
	      		  <{/foreach?>
                </select>
              </td>
            </tr>

            <?php if ($pg_only) {?>
              <input type="hidden" name="check_mature" value="0" />
            <?php } else {?>
              <tr align="left">
                <td class="head"><?php echo $modlos_type_ttl?></td>
                <td class="odd">
                  <input type="checkbox" name="check_mature" value="1" <?php if ($check_mature==1) {?>checked<?php }?> />
                  <?php echo $modlos_mature_ttl?>
                </td>
              </tr>
            <?php }?>

            <tr>
              <td colspan=2 align=center>
                <br />
                <input type="submit" name="action_submit" value="<?php echo $modlos_save?>" />&nbsp;&nbsp;
                <input type="reset"  value=<?php echo $modlos_reset_ttl?> />
                <?php if ($event_id>0) {?>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  <input type="submit" name="submit_delete" value="<?php echo $modlos_delete_ttl?>" />
                <?php }?>
              </td>
            </tr>
          </table>

        </td>
        <td valign=top align=center>&nbsp;</td>
      </tr>
    </tbody>
  </table>
</form>



<br />
<hr />
<?php if ($this->hasError) {?>
  <table cellSpacing=0 cellPadding=0 width=600 border=0 align=center>
    <tbody>
      <tr>
        <td valign=top align=center>&nbsp;</td>
        <td valign=top align=center width=600>
          <table width="600" border="0" align="center" cellpadding="1" cellspacing="1" bgcolor="#FFFFFF" style="color:#1010e0; font-weight:bold;">
            <tr>
              <td>
                <ul>
                  <?php foreach ($this->errorMsg as $errval) {?>
                    <li><font color="#f01010"><b><?php echo $errval?></b></font></li>
                  <?php }?>
                </ul>
              </td>
            </tr>
          </table>
        </td>
        <td valign=top align=center>&nbsp;</td>
      </tr>
    </tbody>
  </table>
  <br />

<?php } else {?>
  <?php if ($this->event_saved) {?>

    <div align="center">
      <h3><font color=#1010e0><?php echo $modlos_saved?></font></h3>
    </div>

    <br />
    <table cellSpacing=0 cellPadding=0 width=600 border=0 align=center>
      <tbody>
        <tr>
          <td valign=top align=center>&nbsp;</td>
          <td valign=top align=center width=600>

            <table width="600" border="0" align="center" cellpadding="1" cellspacing="1" bgcolor="#FFFFFF" style="color:#1010e0; font-weight:bold;">
              <tr align="left">
                <td class="head" width=200><?php echo $modlos_name?></td>
                <td class="even" width=400><?php echo $saved_event_name?></td>
              </tr>
              <tr align="left">
                <?php if ($use_utc_time) {?>
                  <td class="head"><?php echo $modlos_date?>&nbsp;(UTC)</td>
                <?php } else {?>
                  <td class="head"><?php echo $modlos_date?>&nbsp;(Local)</td>
                <?php }?>
                <td class="odd"><?php echo $saved_event_date?></td>
              </tr>
              <tr align="left">
                <td class="head"><?php echo $modlos_category?></td>
                <td class="even">
                  <?php if ($saved_category==0) {?><?php echo $modlos_all_category?><?php }?>
                  <?php if ($saved_category==18){?><?php echo $modlos_discussion?><?php }?>
                  <?php if ($saved_category==19){?><?php echo $modlos_sports?><?php }?>
                  <?php if ($saved_category==20){?><?php echo $modlos_music?><?php }?>
                  <?php if ($saved_category==22){?><?php echo $modlos_commercial?><?php }?>
                  <?php if ($saved_category==23){?>
                    <?php if (!$pg_only) {?><?php echo $modlos_nightlife?><?php }?><?php echo $modlos_enteme?>
                  <?php }?>
                  <?php if ($saved_category==24){?><?php echo $modlos_games?><?php }?>
                  <?php if ($saved_category==25){?><?php echo $modlos_pageants?><?php }?>
                  <?php if ($saved_category==26){?><?php echo $modlos_edu?><?php }?>
                  <?php if ($saved_category==27){?><?php echo $modlos_arts?><?php }?>
                  <?php if ($saved_category==28){?><?php echo $modlos_charity?><?php }?>
                  <?php if ($saved_category==29){?><?php echo $modlos_misc?><?php }?>
                </td>
              </tr>
              <tr align="left">
                <td class="head"><?php echo $modlos_owner?></td>
                <td class="odd" ><?php echo $saved_event_owner?></td>
              </tr>
              <tr align=left>
                <td class="head"><?php echo $modlos_location?></td>
                <td class="even"><?php echo $saved_region_name?>&nbsp;:&nbsp; <?php echo $saved_global_pos?></td>
              </tr>
              <tr align=left>
                <td class="head"><?php echo $modlos_amount?>&nbsp;(L$)</td>
                <td class="odd" ><?php echo $saved_cover_amount?></td>
              </tr>
              <?php if (!$pg_only) {?>
                <tr align="left">
                  <td class="head"><?php echo $modlos_type?></td>
                  <td class="even"><strong><img height=20px width=20px <?php echo $saved_event_type?> /></strong></td>
                </tr>
              <?php }?>
            </table>

          </td>
          <td valign=top align=center>&nbsp;</td>
        </tr>
      </tbody>
    </table>

  <?php }?>
<?php }?>
